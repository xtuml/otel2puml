<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1609px" preserveAspectRatio="none" style="width:740px;height:1609px;background:#FFFFFF;" version="1.1" viewBox="0 0 740 1609" width="740px" zoomAndPan="magnify"><defs/><g><ellipse cx="352" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="306" x="199" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="286" x="209" y="71.1387">Input time_buffer, batch_size, sql_data_holder</text><rect fill="none" height="1464.6143" style="stroke:#000000;stroke-width:1.5;" width="718" x="11" y="93.9688"/><path d="M183,93.9688 L183,103.2656 L173,113.2656 L11,113.2656 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="14" y="107.9639">find_unique_graphs_sql</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="233" x="235.5" y="130.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="213" x="245.5" y="151.4043">Input time_buffer, sql_data_holder</text><rect fill="none" height="82.2656" style="stroke:#000000;stroke-width:1.5;" width="141" x="281.5" y="175.0361"/><path d="M410.5,175.0361 L410.5,184.333 L400.5,194.333 L281.5,194.333 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="284.5" y="189.0313">get_time_window</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="291.5" y="211.333"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="301.5" y="232.4717">get time window</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="241" x="231.5" y="277.3018"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="221" x="241.5" y="298.4404">Input time_window, sql_data_holder</text><rect fill="none" height="82.2656" style="stroke:#000000;stroke-width:1.5;" width="469" x="117.5" y="321.2705"/><path d="M476.5,321.2705 L476.5,330.5674 L466.5,340.5674 L117.5,340.5674 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="349" x="120.5" y="335.2656">create_temp_table_of_root_nodes_in_time_window</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="449" x="127.5" y="357.5674"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="429" x="137.5" y="378.7061">create a tempt table of root nodes with any ancestor in time window</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="261" y="423.5361"/><text fill="#0000FF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="162" x="271" y="444.6748">get number of root nodes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="232.5" y="521.5049"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="219" x="242.5" y="542.6436">Input i, batch_size, sql_data_holder</text><rect fill="none" height="82.2656" style="stroke:#000000;stroke-width:1.5;" width="134" x="285" y="565.4736"/><path d="M404,565.4736 L404,574.7705 L394,584.7705 L285,584.7705 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="288" y="579.4688">get_root_nodes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="295" y="601.7705"/><text fill="#0000FF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94" x="305" y="622.9092">get root nodes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="258" x="223" y="667.7393"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="238" x="233" y="688.8779">input root_nodes and sql_data_holder</text><rect fill="none" height="682.9375" style="stroke:#000000;stroke-width:1.5;" width="680" x="21" y="711.708"/><path d="M269,711.708 L269,721.0049 L259,731.0049 L21,731.0049 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="238" x="24" y="725.7031">compute_graph_hashes_for_batch</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="259" x="222.5" y="748.0049"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="239" x="232.5" y="769.1436">get distinct trace_ids from root_nodes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="220" x="242" y="801.9736"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="200" x="252" y="823.1123">input trace_ids, sql_data_holder</text><rect fill="none" height="82.2656" style="stroke:#000000;stroke-width:1.5;" width="171" x="266.5" y="845.9424"/><path d="M396.5,845.9424 L396.5,855.2393 L386.5,865.2393 L266.5,865.2393 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="269.5" y="859.9375">get_batch_nodes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="151" x="276.5" y="882.2393"/><text fill="#0000FF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="131" x="286.5" y="903.3779">get graph node data</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="283" y="948.208"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="293" y="969.3467">input graph_nodes</text><rect fill="none" height="82.2656" style="stroke:#000000;stroke-width:1.5;" width="343" x="180.5" y="1012.1768"/><path d="M442.5,1012.1768 L442.5,1021.4736 L432.5,1031.4736 L180.5,1031.4736 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="252" x="183.5" y="1026.1719">create_span_id_to_child_nodes_map</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="323" x="190.5" y="1048.4736"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="303" x="200.5" y="1069.6123">create dict mapping span_id to list of child Node</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="301" x="201.5" y="1158.4424"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="281" x="211.5" y="1179.5811">input root_node, span_id_to_child_node_map</text><rect fill="none" height="82.2656" style="stroke:#000000;stroke-width:1.5;" width="642" x="31" y="1202.4111"/><path d="M261,1202.4111 L261,1211.708 L251,1221.708 L31,1221.708 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="220" x="34" y="1216.4063">compute_graph_hash_recursive</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="622" x="41" y="1238.708"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="602" x="51" y="1259.8467">node_hash = hash(node.event_type + sorted(hash(child.event_type) for child in node.children))</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="211" x="246.5" y="1304.6768"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="191" x="256.5" y="1325.8154">update root_node.graph_hash</text><polygon fill="#F1F1F1" points="352,1114.4424,364,1126.4424,352,1138.4424,340,1126.4424,352,1114.4424" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="272.5,1358.6455,431.5,1358.6455,443.5,1370.6455,431.5,1382.6455,272.5,1382.6455,260.5,1370.6455,272.5,1358.6455" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="159" x="272.5" y="1374.4536">for root_node in root_nodes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="146" x="279" y="1414.6455"/><text fill="#0000FF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="126" x="289" y="1435.7842">commit to database</text><polygon fill="#F1F1F1" points="352,477.5049,364,489.5049,352,501.5049,340,489.5049,352,477.5049" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="222.5,1468.6143,481.5,1468.6143,493.5,1480.6143,481.5,1492.6143,222.5,1492.6143,210.5,1480.6143,222.5,1468.6143" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="259" x="222.5" y="1484.4224">for i in range(0, total_root_nodes, batch_size)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="412" x="146" y="1512.6143"/><text fill="#0000FF" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="392" x="156" y="1533.7529">get trace_ids by distinct graph hashes and group by job_name</text><ellipse cx="352" cy="1588.583" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="345.8128" x2="358.1872" y1="1582.3958" y2="1594.7702"/><line style="stroke:#222222;stroke-width:2.5;" x1="358.1872" x2="345.8128" y1="1582.3958" y2="1594.7702"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="30" y2="50"/><polygon fill="#181818" points="348,40,352,50,356,40,352,44" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="164.2344" y2="211.333"/><polygon fill="#181818" points="348,201.333,352,211.333,356,201.333,352,205.333" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="245.3018" y2="277.3018"/><polygon fill="#181818" points="348,267.3018,352,277.3018,356,267.3018,352,271.3018" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="311.2705" y2="357.5674"/><polygon fill="#181818" points="348,347.5674,352,357.5674,356,347.5674,352,351.5674" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="391.5361" y2="423.5361"/><polygon fill="#181818" points="348,413.5361,352,423.5361,356,413.5361,352,417.5361" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="555.4736" y2="601.7705"/><polygon fill="#181818" points="348,591.7705,352,601.7705,356,591.7705,352,595.7705" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="635.7393" y2="667.7393"/><polygon fill="#181818" points="348,657.7393,352,667.7393,356,657.7393,352,661.7393" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="781.9736" y2="801.9736"/><polygon fill="#181818" points="348,791.9736,352,801.9736,356,791.9736,352,795.9736" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="835.9424" y2="882.2393"/><polygon fill="#181818" points="348,872.2393,352,882.2393,356,872.2393,352,876.2393" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="916.208" y2="948.208"/><polygon fill="#181818" points="348,938.208,352,948.208,356,938.208,352,942.208" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="982.1768" y2="1048.4736"/><polygon fill="#181818" points="348,1038.4736,352,1048.4736,356,1038.4736,352,1042.4736" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="1192.4111" y2="1238.708"/><polygon fill="#181818" points="348,1228.708,352,1238.708,356,1228.708,352,1232.708" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="1272.6768" y2="1304.6768"/><polygon fill="#181818" points="348,1294.6768,352,1304.6768,356,1294.6768,352,1298.6768" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="1138.4424" y2="1158.4424"/><polygon fill="#181818" points="348,1148.4424,352,1158.4424,356,1148.4424,352,1152.4424" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="443.5" x2="685" y1="1370.6455" y2="1370.6455"/><polygon fill="#181818" points="681,1257.5439,685,1247.5439,689,1257.5439,685,1253.5439" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="685" x2="685" y1="1126.4424" y2="1370.6455"/><line style="stroke:#181818;stroke-width:1.0;" x1="685" x2="364" y1="1126.4424" y2="1126.4424"/><polygon fill="#181818" points="374,1122.4424,364,1126.4424,374,1130.4424,370,1126.4424" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="1338.6455" y2="1358.6455"/><polygon fill="#181818" points="348,1348.6455,352,1358.6455,356,1348.6455,352,1352.6455" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="1082.4424" y2="1114.4424"/><polygon fill="#181818" points="348,1104.4424,352,1114.4424,356,1104.4424,352,1108.4424" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="701.708" y2="748.0049"/><polygon fill="#181818" points="348,738.0049,352,748.0049,356,738.0049,352,742.0049" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="1382.6455" y2="1414.6455"/><polygon fill="#181818" points="348,1404.6455,352,1414.6455,356,1404.6455,352,1408.6455" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="501.5049" y2="521.5049"/><polygon fill="#181818" points="348,511.5049,352,521.5049,356,511.5049,352,515.5049" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="493.5" x2="713" y1="1480.6143" y2="1480.6143"/><polygon fill="#181818" points="709,1002.1768,713,992.1768,717,1002.1768,713,998.1768" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="713" x2="713" y1="489.5049" y2="1480.6143"/><line style="stroke:#181818;stroke-width:1.0;" x1="713" x2="364" y1="489.5049" y2="489.5049"/><polygon fill="#181818" points="374,485.5049,364,489.5049,374,493.5049,370,489.5049" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="1448.6143" y2="1468.6143"/><polygon fill="#181818" points="348,1458.6143,352,1468.6143,356,1458.6143,352,1462.6143" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="457.5049" y2="477.5049"/><polygon fill="#181818" points="348,467.5049,352,477.5049,356,467.5049,352,471.5049" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="1492.6143" y2="1512.6143"/><polygon fill="#181818" points="348,1502.6143,352,1512.6143,356,1502.6143,352,1506.6143" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="83.9688" y2="130.2656"/><polygon fill="#181818" points="348,120.2656,352,130.2656,356,120.2656,352,124.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352" x2="352" y1="1546.583" y2="1578.583"/><polygon fill="#181818" points="348,1568.583,352,1578.583,356,1568.583,352,1572.583" style="stroke:#181818;stroke-width:1.0;"/><!--SRC=[bLIxZjim4Epp5OkhBCGufBQJ5EdIv1SMbBYI64WaZwJES8Bxzon9nNfOEYU5OCdapCuEXmi0u8DmuGE_mEcxjaE0e7h2SgXhSaSeHQXQzEeN7S6_T2X54DYQJf8x9v1bj0hAQ7YgbPOuQFKo43PEsDOZGvxWzoxx8yQ60YR0XQdDvIzLekErH0PvBMFVxahbrSUbAaSY40RgBGPHTeIcHcTCG6qaULHwLqc6We08vh8H3QQ6Y8Q4PesX1Q6l_5JaWt6Wz9xwnFcvCfrnfs_TG5zZftheIt9BrlDjkoFB4YPqxb_zm_5j63urlUXohMXBnwm1bIHCNDovt9UmFWpJCtfC4RR2jtm2jN6O-fdBMiH1AX-KhlW8dAW8bVHGEzFFL9plWLde3N5yN-I6NzdZEyCMHTRcfSQIUn1BtTTusnEQBTbfvZxFtWhDRM4mMBMgasEQUs5tjOvnbegDv7rMwGP66WW6EZOvvZ3HmG-cUwH-bSwjU1nXKsZK-HyXGKVLuBnwfSs89CQu3xv0_3d4FvxfbJHFcQib-0ZUk43oa5QJZDbo0Pp0iMs-lGcSlXpfebZAN1fm6goCbjxQVPuqdpUiWWlJqY6Mkq5YoId7nNlLvc5ZateLuhd5d9N2qtfgv6AGggbKHUY63f-E30gYcus3-JWfYlt9CDs-yZhToHpvV9VJC6YS6MpSyjEKg4LFyo58Mlu1]--></g></svg>